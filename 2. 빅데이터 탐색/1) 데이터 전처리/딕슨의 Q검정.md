# 딕슨의 Q검정(Dixon's Q-test)
> 데이터 세트에서 **이상치(outlier)**, 즉 나머지 데이터와 현저하게 다른 값을 통계적으로 판별하는 데 사용되는 간단한 방법  
> 이 검정은 주로 소규모 데이터 세트(보통 3개에서 30개 사이의 데이터)에 적용됩니다.

---

### Q검정의 원리 및 단계
Q검정은 가장 극단적인 값(가장 크거나 가장 작은 값)이 나머지 데이터와 얼마나 떨어져 있는지를 **Q값(Q-ratio)**으로 계산하여  
미리 정해진 **임계값(critical value)**과 비교하는 원리

1.  **데이터 정렬:** 먼저, 모든 데이터를 크기 순서대로 정렬합니다. 
    * $x_1 ≤ x_2 ≤ ... ≤ x_n$
    
2.  **Q값 계산:** 가장 의심스러운 이상치 후보 값($x_{min}$ 또는 $x_{max}$)에 대해 Q값을 계산합니다. Q값은 다음과 같이 정의됩니다:
    * $Q_{calculated} = |x_{outlier} - x_{nearest}| / R$
    * $x_{outlier}$: 이상치 후보 값 (가장 작거나 가장 큰 값)
    * $x_{nearest}$: 이상치 후보 값에 가장 가까운 값
    * $R$: 데이터의 전체 범위(range), 즉 $x_{max} - x_{min}$

3.  **임계값 비교:** 계산된 $Q_{calculated}$ 값을 통계표에서 찾은 **임계값($Q_{table}$)**과 비교합니다. 이 임계값은 유의수준($\alpha$)과 데이터의 총 개수(n)에 따라 결정됩니다.
    * 만약 $Q_{calculated} > Q_{table}$ 이면, 해당 값은 통계적으로 **이상치**로 간주되어 데이터 세트에서 제거할 수 있습니다.
    * 만약 $Q_{calculated} ≤ Q_{table}$ 이면, 해당 값은 이상치가 아니며 데이터 세트에 포함됩니다.

---

### 예시: Q검정을 사용한 이상치 판별
어떤 실험에서 얻은 5개의 데이터가 다음과 같다고 가정해봅시다: **10.5, 11.0, 10.8, 12.5, 10.9**. 이 데이터 세트에서 12.5가 이상치인지 판별해 봅시다.

1.  **데이터 정렬:**
    * 10.5, 10.8, 10.9, 11.0, 12.5

2.  **Q값 계산:**
    * 이상치 후보 값($x_{outlier}$)은 12.5입니다.
    * 가장 가까운 값($x_{nearest}$)은 11.0입니다.
    * 전체 범위($R$)는 $12.5 - 10.5 = 2.0$ 입니다.
    * $Q_{calculated} = |12.5 - 11.0| / 2.0 = 1.5 / 2.0 = 0.75$

3.  **임계값 비교:**
    * 유의수준 $\alpha = 0.05$ (95% 신뢰수준)에서 데이터 개수 $n = 5$에 대한 Q검정표의 임계값($Q_{table}$)을 찾아봅니다. 이 값은 **0.710**입니다.
    * $Q_{calculated}$ (0.75) > $Q_{table}$ (0.710) 이므로, **12.5는 통계적으로 이상치로 판정됩니다**.

---

### Q검정의 한계
* **하나의 이상치만 판별:** Q검정은 한 번에 **하나의 이상치**만 검출할 수 있습니다. 여러 개의 이상치가 존재할 경우,
  이상치를 하나 제거한 후 남은 데이터에 대해 다시 검정을 반복해야 합니다.
* **소규모 데이터에만 적합:** 데이터 개수가 30개를 넘어가면 Q검정의 신뢰성이 떨어지기 때문에,
  더 큰 데이터 세트에는 다른 통계적 방법(예: Z-점수, 수정된 Z-점수 등)을 사용하는 것이 더 적합합니다.

---  

  ## 추가 예시 - Q검정 표 사용법
  딕슨 Q검정 임계값 표를 사용하여 이상치를 판정하는 방법은 간단합니다. 다음 예시를 통해 단계를 자세히 살펴보겠습니다.

### 예시: 임계값 표를 이용한 이상치 판정

어떤 측정 실험에서 다음과 같은 6개의 데이터가 나왔다고 가정해 봅시다: **4.5, 4.6, 4.8, 5.0, 5.1, 5.8**. 이 데이터 세트에서 가장 큰 값인 **5.8**이 이상치인지 확인해 보겠습니다.

#### 1. Q값 계산

먼저, 이상치 후보인 **5.8**에 대한 Q값을 계산합니다.

* **데이터 정렬:** 4.5, 4.6, 4.8, 5.0, 5.1, 5.8
* **이상치 후보 값 ($x_{outlier}$):** 5.8
* **가장 가까운 값 ($x_{nearest}$):** 5.1
* **전체 범위 ($R$):** $5.8 - 4.5 = 1.3$
* **$Q_{calculated}$:** $|5.8 - 5.1| / 1.3 = 0.7 / 1.3 \approx 0.538$

---

#### 2. 임계값 표에서 값 찾기

이제, 계산된 Q값(0.538)과 비교할 **임계값**을 딕슨 Q검정표에서 찾아야 합니다.

* **데이터 개수 ($n$) = 6**
* **유의수준 ($\alpha$) = 0.05** (일반적으로 가장 많이 사용되는 95% 신뢰수준)

다음 표에서 $n=6$ 행과 $\alpha=0.05$ 열이 교차하는 지점을 찾습니다.

| 데이터 개수 (n) | 유의수준 (α) 0.1 | 유의수준 (α) 0.05 | 유의수준 (α) 0.01 |
| :---: | :---: | :---: | :---: |
| 3 | 0.941 | 0.970 | 0.994 |
| 4 | 0.765 | 0.829 | 0.926 |
| 5 | 0.642 | 0.710 | 0.821 |
| **6** | 0.560 | **0.625** | 0.740 |
| 7 | 0.507 | 0.568 | 0.680 |
| 8 | 0.468 | 0.526 | 0.634 |
| 9 | 0.437 | 0.493 | 0.598 |
| 10 | 0.412 | 0.466 | 0.568 |

표에서 $n=6, \alpha=0.05$에 해당하는 임계값($Q_{table}$)은 **0.625**입니다.

---

#### 3. Q값과 임계값 비교 및 결론

이제 계산된 Q값과 표에서 찾은 임계값을 비교합니다.

* **$Q_{calculated}$ (0.538) < $Q_{table}$ (0.625)**

계산된 Q값이 임계값보다 작으므로, 데이터 **5.8은 통계적으로 이상치가 아닙니다**. 따라서 이 값은 데이터 세트에 유지됩니다.

**요약:**
1.  **Q값 계산:** 가장 의심되는 값에 대해 Q값을 구합니다.
2.  **임계값 찾기:** 데이터의 총 개수($n$)와 유의수준($\alpha$)을 기준으로 임계값 표에서 해당 값을 찾습니다.
3.  **결론:** 만약 $Q_{calculated}$ > $Q_{table}$ 이면 이상치로 판정하고, 그렇지 않으면 이상치가 아닙니다.
