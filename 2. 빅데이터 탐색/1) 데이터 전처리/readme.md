# 데이터 전처리
> 빅데이터 전처리는 분석의 정확성과 효율성을 높이기 위한 핵심 단계
> 아래는 **데이터 정제**와 **분석 변수 처리** 두 항목으로 나누어 정리

---

## 🧹 1. 데이터 정제 (Data Cleaning)

데이터 정제는 원시 데이터를 분석 가능한 상태로 만드는 과정입니다. 주요 단계는 다음과 같습니다:

### 📌 결측값 처리
- **삭제**: 결측값이 적거나 무작위일 경우 해당 행 또는 열 제거
- **대체**:
  - 평균, 중앙값, 최빈값으로 대체
  - 그룹별 평균 또는 예측 모델 기반 대체 (e.g. KNN, 회귀)
- **표시**: 결측값을 별도 범주로 처리 (특히 범주형 변수에서)

### 📌 이상값 처리
- **탐지 방법**:
  - 통계 기반: Z-score, IQR (Interquartile Range)
  - 시각화: Boxplot, Scatterplot
- **처리 방법**:
  - 제거 또는 수정
  - 로그 변환, Winsorizing 등으로 영향 완화

### 📌 중복 데이터 제거
- **완전 중복**: 동일한 행 전체 삭제
- **부분 중복**: 기준 컬럼 설정 후 중복 제거

### 📌 오류 및 불일치 수정
- 오타, 잘못된 형식, 단위 불일치 등 수정
- 예: "Seoul", "seoul", "SEOUL" → 통일

### 📌 형식 통일 및 표준화
- 날짜 형식 통일 (YYYY-MM-DD 등)
- 텍스트 정규화 (소문자 변환, 특수문자 제거 등)

---

## 📊 2. 분석 변수 처리 (Feature Engineering)

분석 변수 처리는 모델 성능을 높이기 위한 핵심 작업입니다.

### 📌 변수 선택 (Feature Selection)
- **통계적 방법**: 상관계수, 카이제곱 검정, ANOVA
- **모델 기반**: Lasso, Random Forest 중요도
- **도메인 지식 기반**: 전문가 판단에 따른 선택

### 📌 변수 생성 (Feature Creation)
- **파생 변수**: 기존 변수 조합으로 새로운 변수 생성
  - 예: 날짜 → 요일, 월, 분기
  - 예: 가격 × 수량 → 총 구매액
- **집계 변수**: 그룹별 평균, 합계 등 생성
  - 예: 고객별 평균 구매액

### 📌 변수 인코딩
- **범주형 변수 처리**:
  - Label Encoding: 순서가 있는 경우
  - One-Hot Encoding: 순서가 없는 경우
- **빈도 인코딩**: 각 범주의 등장 횟수로 변환

### 📌 변수 스케일링
- **표준화 (Standardization)**: 평균 0, 표준편차 1
- **정규화 (Normalization)**: 0~1 사이로 변환
- **로그 변환**: 분포 왜곡 완화, 이상값 영향 감소

### 📌 차원 축소
- **PCA (주성분 분석)**: 변수 간 상관관계를 고려해 축소
- **t-SNE, UMAP**: 시각화나 군집 분석에 활용

---
# 분야별 예시
 **빅데이터 전처리 예시**를 아래에 정리
 데이터 정제와 분석 변수 처리의 관점에서 어떻게 달라지는지 비교

---

## 💰 금융 분야 예시

### 🧹 데이터 정제
- **결측값 처리**:  
  - 고객의 신용등급이 누락된 경우 → 평균 또는 그룹별 평균으로 대체  
  - 거래 내역 중 일부 금액이 누락 → 해당 거래 제거 또는 예측 모델로 보완
- **이상값 처리**:  
  - 하루에 수억 원 거래한 개인 고객 → 이상 거래 탐지로 분류  
  - 갑작스러운 대출 상환 → 로그 변환 또는 별도 변수로 분리
- **형식 통일**:  
  - 날짜 형식 통일 (YYYY-MM-DD)  
  - 통화 단위 통일 (KRW, USD 등)

### 📊 분석 변수 처리
- **파생 변수 생성**:  
  - `총자산 = 예금 + 투자금액 - 대출금`  
  - `신용등급 변화율 = (현재 등급 - 과거 등급) / 과거 등급`
- **범주형 인코딩**:  
  - 고객 직업, 거주 지역 → One-Hot Encoding  
- **스케일링**:  
  - 자산 규모, 대출 금액 → 정규화 또는 로그 변환

---

## 🏥 의료 분야 예시

### 🧹 데이터 정제
- **결측값 처리**:  
  - 혈압, 체온 등 생체 데이터 누락 → 평균 또는 환자군 평균으로 대체  
  - 진단 코드 누락 → 의료 기록 기반 보완
- **이상값 처리**:  
  - 체온 50도, 혈압 300mmHg → 센서 오류로 간주하고 제거  
- **형식 통일**:  
  - ICD 진단 코드 통일  
  - 병원명, 약품명 표준화

### 📊 분석 변수 처리
- **파생 변수 생성**:  
  - `BMI = 체중(kg) / 키(m)^2`  
  - `입원 기간 = 퇴원일 - 입원일`
- **범주형 인코딩**:  
  - 진단명, 치료방법 → One-Hot 또는 빈도 인코딩  
- **스케일링**:  
  - 혈액 수치, 검사 결과 → 표준화

---

## 📈 마케팅 분야 예시

### 🧹 데이터 정제
- **결측값 처리**:  
  - 고객 이메일, 성별 누락 → 제거 또는 ‘Unknown’ 처리  
  - 클릭 로그 누락 → 세션 기준으로 보완
- **이상값 처리**:  
  - 하루 1000번 이상 클릭한 사용자 → 봇으로 간주하고 제거  
- **형식 통일**:  
  - 제품명, 캠페인명 통일  
  - 날짜 및 시간 형식 정리

### 📊 분석 변수 처리
- **파생 변수 생성**:  
  - `구매전환율 = 구매수 / 클릭수`  
  - `재방문율 = 재방문 고객 / 전체 방문 고객`
- **범주형 인코딩**:  
  - 캠페인 유형, 광고 채널 → One-Hot Encoding  
- **스케일링**:  
  - 광고비, 구매금액 → 로그 변환 또는 정규화

---

이렇게 분야별로 전처리 방식이 달라지는 이유는 **데이터의 특성과 분석 목적이 다르기 때문**이다.

