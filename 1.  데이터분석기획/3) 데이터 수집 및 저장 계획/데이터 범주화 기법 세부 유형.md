# 데이터 범주화 기법: 감추기, 랜덤 라운딩, 범위, 제어 라운딩

## 개요

데이터 범주화 기법은 **통계 공표 시 개인정보 노출을 방지**하면서도 **통계적 유용성을 유지**하기 위한 기법들입니다. 주로 통계청이나 연구기관에서 집계 데이터를 공개할 때 사용됩니다.

## 원본 데이터 예시 📊

한 지역의 직업별 소득 현황 조사 결과를 가정해보겠습니다:

### 원본 집계표 (지역별 × 직업별 소득자 수)

| 직업 | A동 | B동 | C동 | D동 | E동 | 총계 |
|------|-----|-----|-----|-----|-----|------|
| 의사 | 3 | 1 | 7 | 2 | 5 | 18 |
| 변호사 | 2 | 0 | 4 | 1 | 3 | 10 |
| 교사 | 12 | 8 | 15 | 6 | 9 | 50 |
| 공무원 | 25 | 18 | 32 | 14 | 21 | 110 |
| 회사원 | 45 | 32 | 58 | 27 | 38 | 200 |
| **총계** | **87** | **59** | **116** | **50** | **76** | **388** |

### 문제점 식별 🚨
- B동 변호사: **0명** → 해당 직업이 없음이 노출
- B동 의사: **1명** → 개인 식별 가능성 높음
- D동 변호사: **1명** → 개인 식별 가능성 높음

---

## 1. 감추기(Suppression) 🙈

### 정의
**특정 기준 이하의 작은 값들을 공개하지 않고 감추는** 기법

### 적용 원리
- 임계값(보통 3 또는 5) 미만인 셀을 감춤
- 보조적 감추기로 역추산 방지
- 전체 합계는 유지

### 실제 적용 예시

#### 감추기 규칙 설정
```
주 감추기: 3명 미만인 셀을 'X'로 표시
보조 감추기: 주 감추기된 값이 역추산 가능한 셀도 감춤
```

#### 1단계: 주 감추기 적용

| 직업 | A동 | B동 | C동 | D동 | E동 | 총계 |
|------|-----|-----|-----|-----|-----|------|
| 의사 | 3 | **X** | 7 | **X** | 5 | 18 |
| 변호사 | **X** | **X** | 4 | **X** | 3 | 10 |
| 교사 | 12 | 8 | 15 | 6 | 9 | 50 |
| 공무원 | 25 | 18 | 32 | 14 | 21 | 110 |
| 회사원 | 45 | 32 | 58 | 27 | 38 | 200 |

#### 2단계: 보조 감추기 적용 (역추산 방지)

```
문제: B동 의사가 X여도 다른 값으로 역추산 가능
B동 의사 = 총계(18) - A동(3) - C동(7) - D동(X) - E동(5) = ?

해결: D동 의사도 추가로 감춤
```

#### 최종 감추기 결과

| 직업 | A동 | B동 | C동 | D동 | E동 | 총계 |
|------|-----|-----|-----|-----|-----|------|
| 의사 | 3 | **X** | 7 | **X** | 5 | 18 |
| 변호사 | **X** | **X** | 4 | **X** | **X** | 10 |
| 교사 | 12 | 8 | 15 | 6 | 9 | 50 |
| 공무원 | 25 | 18 | 32 | 14 | 21 | 110 |
| 회사원 | 45 | 32 | 58 | 27 | 38 | 200 |
| **총계** | **87** | **59** | **116** | **50** | **76** | **388** |

### 감추기의 장단점

**✅ 장점:**
- 완전한 프라이버시 보호
- 명확한 적용 기준
- 역추산 방지 효과

**❌ 단점:**
- 정보 손실이 큼
- 보조 감추기로 인한 추가 정보 손실
- 사용자 불편 (X가 많을 경우)

---

## 2. 랜덤 라운딩(Random Rounding) 🎲

### 정의
**각 셀의 값을 확률적으로 가장 가까운 기준수(보통 5)의 배수로 반올림**하는 기법

### 적용 원리
- 기준수의 배수로 반올림 (보통 5의 배수)
- 반올림 방향을 확률적으로 결정
- 전체적인 합계는 근사적으로 유지

### 실제 적용 예시

#### 5의 배수 랜덤 라운딩 적용

```
라운딩 규칙:
- 2.5 미만: 0으로 라운딩
- 2.5 이상 7.5 미만: 50% 확률로 0 또는 5
- 7.5 이상 12.5 미만: 50% 확률로 5 또는 10
- 이하 동일한 방식으로 적용
```

#### 각 셀별 랜덤 라운딩 과정

| 원본값 | 구간 | 확률적 선택 | 라운딩 결과 |
|--------|------|-------------|-------------|
| 1 (B동 의사) | 0-2.5 | - | **0** |
| 2 (A동 변호사) | 0-2.5 | - | **0** |
| 3 (A동 의사) | 2.5-7.5 | 확률 50% | **5** |
| 6 (D동 교사) | 2.5-7.5 | 확률 50% | **5** |
| 8 (B동 교사) | 7.5-12.5 | 확률 50% | **10** |
| 12 (A동 교사) | 10-15 | 확률 50% | **10** |

#### 랜덤 라운딩 적용 결과

| 직업 | A동 | B동 | C동 | D동 | E동 | 총계 |
|------|-----|-----|-----|-----|-----|------|
| 의사 | 5 | 0 | 5 | 0 | 5 | 15 |
| 변호사 | 0 | 0 | 5 | 0 | 5 | 10 |
| 교사 | 10 | 10 | 15 | 5 | 10 | 50 |
| 공무원 | 25 | 20 | 30 | 15 | 20 | 110 |
| 회사원 | 45 | 30 | 60 | 25 | 40 | 200 |
| **총계** | **85** | **60** | **115** | **45** | **80** | **385** |

### 랜덤 라운딩의 장단점

**✅ 장점:**
- 모든 셀 값이 공개됨
- 전체적인 분포 패턴 유지
- 작은 값들의 프라이버시 보호

**❌ 단점:**
- 정확한 값이 아님
- 합계 불일치 가능
- 0으로 표시된 값이 실제로는 존재할 수 있음

---

## 3. 범위(Ranges) 📏

### 정의
**정확한 수치 대신 범위로 표시**하여 개인정보를 보호하는 기법

### 적용 원리
- 작은 값들을 범위로 그룹화
- 일정 기준 이상의 값만 정확히 공개
- 범위 내 실제 분포는 알 수 없음

### 실제 적용 예시

#### 범위 설정 규칙
```
범위 설정:
- 1-2명: "1-2"로 표시
- 3-5명: "3-5"로 표시  
- 6-10명: "6-10"으로 표시
- 11명 이상: 정확한 수치 공개
```

#### 범위 적용 결과

| 직업 | A동 | B동 | C동 | D동 | E동 | 총계 |
|------|-----|-----|-----|-----|-----|------|
| 의사 | **3-5** | **1-2** | **6-10** | **1-2** | **3-5** | 18 |
| 변호사 | **1-2** | **1-2** | **3-5** | **1-2** | **3-5** | 10 |
| 교사 | 12 | **6-10** | 15 | **6-10** | **6-10** | 50 |
| 공무원 | 25 | 18 | 32 | 14 | 21 | 110 |
| 회사원 | 45 | 32 | 58 | 27 | 38 | 200 |
| **총계** | **87** | **59** | **116** | **50** | **76** | **388** |

### 추가 범위 표시 방법

#### 방법 1: 부등호 사용
```
1명 → "1명 미만" 또는 "3명 미만"
2명 → "3명 미만"  
8명 → "6-10명"
```

#### 방법 2: 구간별 상세 분류
```
소규모: 1-5명
중규모: 6-20명  
대규모: 21명 이상
```

### 범위 기법의 장단점

**✅ 장점:**
- 대략적인 규모 파악 가능
- 완전한 정보 손실 방지
- 직관적으로 이해하기 쉬움

**❌ 단점:**
- 정확한 분석 어려움
- 범위 내 분포 불명확
- 합계 검증 어려움

---

## 4. 제어 라운딩(Controlled Rounding) ⚙️

### 정의
**전체 합계를 정확히 유지하면서 개별 셀 값들을 일정한 기준으로 라운딩**하는 기법

### 적용 원리
- 모든 값을 기준수(보통 5)의 배수로 라운딩
- 행과 열의 합계가 정확히 일치하도록 조정
- 최적화 알고리즘 사용하여 조정

### 실제 적용 예시

#### 5의 배수 제어 라운딩 과정

**1단계: 초기 라운딩**
```
원본값 → 가장 가까운 5의 배수
1 → 0, 2 → 0, 3 → 5, 6 → 5, 7 → 5, 8 → 10, 9 → 10...
```

**2단계: 합계 조정**

| 직업 | A동 | B동 | C동 | D동 | E동 | 행 합계 | 목표 |
|------|-----|-----|-----|-----|-----|---------|------|
| 의사 | 5 | 0 | 5 | 0 | 5 | 15 | 18 |
| 변호사 | 0 | 0 | 5 | 0 | 5 | 10 | 10 |
| 교사 | 10 | 10 | 15 | 5 | 10 | 50 | 50 |
| 공무원 | 25 | 20 | 30 | 15 | 20 | 110 | 110 |
| 회사원 | 45 | 30 | 60 | 25 | 40 | 200 | 200 |
| **열 합계** | **85** | **60** | **115** | **45** | **80** | **385** | |
| **목표** | **87** | **59** | **116** | **50** | **76** | **388** | |

**3단계: 최적화 조정**
```
부족한 값: 388 - 385 = 3
조정 필요:
- A동: +2 (85→87)
- B동: -1 (60→59) 
- C동: +1 (115→116)
- D동: +5 (45→50)
- E동: -4 (80→76)
```

#### 최종 제어 라운딩 결과

| 직업 | A동 | B동 | C동 | D동 | E동 | 총계 |
|------|-----|-----|-----|-----|-----|------|
| 의사 | 5 | 0 | 5 | 5 | 5 | 20 |
| 변호사 | 0 | 0 | 5 | 0 | 0 | 5 |
| 교사 | 10 | 10 | 15 | 10 | 10 | 55 |
| 공무원 | 25 | 20 | 30 | 15 | 20 | 110 |
| 회사원 | 47 | 29 | 61 | 20 | 41 | 198 |
| **총계** | **87** | **59** | **116** | **50** | **76** | **388** |

### 제어 라운딩의 장단점

**✅ 장점:**
- 정확한 합계 유지
- 일관된 라운딩 기준
- 통계적 분석 가능

**❌ 단점:**
- 복잡한 계산 과정
- 개별 셀의 오차 발생 가능
- 최적해 도출의 어려움

---

## 기법별 비교 분석 📊

### 종합 비교표

| 기법 | 프라이버시 보호 | 정보 보존 | 사용 편의성 | 구현 복잡도 | 적용 상황 |
|------|----------------|-----------|-------------|-------------|-----------|
| **감추기** | 매우 높음 | 낮음 | 보통 | 낮음 | 극소수 데이터 많을 때 |
| **랜덤 라운딩** | 높음 | 중간 | 높음 | 중간 | 일반적인 집계표 공개 |
| **범위** | 중간 | 중간 | 높음 | 낮음 | 대략적 분포 파악 목적 |
| **제어 라운딩** | 중간 | 높음 | 높음 | 높음 | 정확한 합계 필요시 |

### 실제 활용 사례별 추천

#### 🏥 의료통계 (높은 민감도)
```
추천: 감추기 + 범위 조합
- 3명 미만: 감추기 적용
- 3-10명: 범위로 표시
- 11명 이상: 정확한 수치
```

#### 📊 인구통계 (일반적 수준)
```
추천: 제어 라운딩
- 5의 배수로 라운딩
- 전체 합계 정확히 유지
- 지역별 비교 분석 가능
```

#### 💼 고용통계 (빈번한 업데이트)
```
추천: 랜덤 라운딩
- 빠른 처리 가능
- 전체적 경향 파악
- 정기적 발표에 적합
```

## 실무 적용 가이드라인 📋

### 1. 기준 설정
- **임계값**: 보통 3-5명 미만
- **라운딩 기준**: 5 또는 10의 배수
- **범위 구간**: 데이터 특성에 따라 조정

### 2. 품질 관리
- **정확성 검증**: 합계 일치 여부 확인
- **일관성 점검**: 시계열 데이터의 연속성
- **유용성 평가**: 분석 목적 달성 가능 여부

### 3. 공개 정책
- **방법론 명시**: 적용된 기법 설명
- **주의사항 안내**: 해석 시 고려사항
- **메타데이터 제공**: 원본 데이터 특성 정보

### 4. 법적 준수
- **통계법 준수**: 통계 작성 및 공표 기준
- **개인정보보호법**: 개인식별 방지 의무
- **국제 기준**: OECD 통계 공표 가이드라인

## 결론 💡

각 데이터 범주화 기법은 **프라이버시 보호 수준**과 **정보의 유용성** 사이의 균형을 다르게 조절합니다. 

- **높은 보안이 필요한 경우**: 감추기 또는 범위 기법
- **통계적 분석이 중요한 경우**: 제어 라운딩 
- **일반적인 공표 목적**: 랜덤 라운딩

실제로는 **데이터의 성격, 활용 목적, 법적 요구사항**을 종합적으로 고려하여 적절한 기법을 선택하거나 여러 기법을 조합하여 사용하는 것이 바람직합니다.
